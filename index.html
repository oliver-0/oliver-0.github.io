<!DOCTYPE html>
<html>
<head>
	<title>Take-Home Pay Calculator</title>
	<!--<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />-->
	<meta name="viewport" content="width=device-width" />
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<header>
		<h1 class="mainHeaderText">Take-Home Pay Calculator</h1>
	</header>
	<article class="mainContent">
		<section class="introduction">
			<h4>Take-Home Pay Calculator</h4>
			<p>This Take-Home Pay Calculator will calculate how much of your salary you get to
				take home after Tax, National Insurance, Student Loans and more.</p>
		</section> <!--introduction section end-->





		<section class="inputs-section">
			<div class="inline">Enter Salary:</div>
			<input id="inputIncome" name="inputIncome" type="number" min="0" max="99999999" pattern="\d*" autofocus>

			<div class="scottishtax">
				<div class="inline">Scottish Tax:</div>
				<div class="inline">Y/N</div>
			</div>
		</section> <!--inputs section end-->

		<section class="advanced-section">
			<h4 id="advancedHeader" class="advanced-header">More options</h4>
			<div id="advancedContent" class="advanced-content">
				<div class="inline">Student Loan type:</div>
				<select id="studentLoan" name="studentLoan">
					<option class="studentLoanOption" value="plan0">No Student Loan</option>
					<option class="studentLoanOption" value="plan1">Student Loan Plan 1</option>
					<option class="studentLoanOption" value="plan2">Student Loan Plan 2</option>
				</select>

				<div class="inline">NI Exemption? (e.g. over SPA)</div>
				<div class="inline">Y/N</div>

				<div>Pension:</div>
				<input>
			</div>

		</section> <!--advanced section end-->

		<section class="radiobox">
			<div class="top-wrapper group">
				<input type="radio" class="radiobox-button hidden" name="radiobox" id="radioboxbutton-yearly" value="yearly-box">
					<label class="radiobox-label" for="radioboxbutton-yearly">Yearly</label>
				<input type="radio" class="radiobox-button hidden" name="radiobox" id="radioboxbutton-monthly" value="monthly-box" checked>
					<label class="radiobox-label" for="radioboxbutton-monthly">Monthly</label>
				<input type="radio" class="radiobox-button hidden" name="radiobox" id="radioboxbutton-weekly" value="weekly-box">
					<label class="radiobox-label" for="radioboxbutton-weekly">Weekly</label>
			</div>
			<div class="bottom-wrapper">
				<div class="radiobox-content hidden" id="yearly-box">Yearly Take Home Pay: &pound;0.00</div>
				<div class="radiobox-content" id="monthly-box">Monthly Take Home Pay: &pound;0.00</div>
				<div class="radiobox-content hidden" id="weekly-box">Weekly Take Home Pay: &pound;0.00</div>
			</div>
		</section> <!--radiobox section end-->


	<div id="pieChart"></div>

	<div>
		<p>afterword</p>
	</div>

	</article> <!--mainContent end-->

	<div class="footer-parent">
		<footer>
		  <p>Footer content</p>
		</footer>
	</div>

	<script type="text/javascript">
		// Notes
		//  need to add input validation
		//
		// This function calculates the output Take Home Pay
		//	It runs whenever the input box is edited, or when a radio button is selected
		function calculateTakeHomePay() {
			var income = document.getElementById('inputIncome').value;
			// This takes the LoanType from the radio buttons in the form inputs
			var studentLoanType = document.querySelector('select[id="studentLoan"]').value;
			//console.log("student loan type "+studentLoanType)
			//console.log("taxPayable:"+taxPayable(income))
			//console.log("studentLoan:"+studentLoan(income, studentLoanType))
			//console.log("totalNIConts:"+totalNIConts(income))
			//console.log("personalAllowanceCap"+personalAllowanceCap(income))
			var after_Tax_Annual = (income - taxPayable(income) - studentLoan(income, studentLoanType) - totalNIConts(income));
			//this line divides the calculated annual Take Home Pay by 12 to get Monthly, rounds to 2dp, and puts the result into the page
			var yearlyOutput = (1/100)*Math.floor((after_Tax_Annual)*100);
			var monthlyOutput = yearlyOutput/12;
			var weeklyOutput = yearlyOutput/52;
			//toFixed() turns a number into a string with forced 2dp.
			document.getElementById("yearly-box").innerHTML = "Yearly Take Home Pay: &pound;" + numberWithCommas(yearlyOutput.toFixed(2));
			document.getElementById("monthly-box").innerHTML = "Monthly Take Home Pay: &pound;" + numberWithCommas(monthlyOutput.toFixed(2));
			document.getElementById("weekly-box").innerHTML = "Weekly Take Home Pay: &pound;" + numberWithCommas(weeklyOutput.toFixed(2));
			drawChart();
		}
	</script>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript" src="chart.js"></script>
	<script type="text/javascript" src="take_home_pay_calculator.js"></script>
	<script type="text/javascript" src="radiobox.js"></script>
</body>
</html>
