<!DOCTYPE html>
<html>
<head>
	<title>Take-Home Pay Calculator</title>
	<link rel="stylesheet" href="styles.css">
	<script type="text/javascript" src="take_home_pay_calculator.js"></script>
	<script type="text/javascript" src="radiobox.js"></script>
</head>

<body>
	<header>
		<h1 class="mainHeaderText">Take-Home Pay Calculator</h1>
	</header>
	<div class="mainBox">
		<p class="nomargin">Enter Gross Income: <input id="inputIncome" name="inputIncome" type="number"></p>
		<p>
			<input class="studentLoanButtons" type="radio" id="studentLoanPlan0" name="studentLoan" value="plan0" checked>
				<label class="studentLoanLabels" for="studentLoanPlan0">No Student Loan</label>
		</p>
		<p>
			<input class="studentLoanButtons" type="radio" id="studentLoanPlan1" name="studentLoan" value="plan1">
				<label class="studentLoanLabels" for="studentLoanPlan1">Student Loan Plan 1</label>
		</p>
		<p>
			<input class="studentLoanButtons" type="radio" id="studentLoanPlan2" name="studentLoan" value="plan2">
				<label class="studentLoanLabels" for="studentLoanPlan2">Student Loan Plan 2</label>
		</p>



		<div class="top-wrapper group">
			<input type="radio" class = "radiobox-button" name="radiobox" id="radioboxbutton-yearly" value="yearly-box" hidden>
				<label class="radiobox-label" for="radioboxbutton-yearly"><div class="centered">Yearly</div></label>
			<input type="radio" class = "radiobox-button" name="radiobox" id="radioboxbutton-monthly" value="monthly-box" checked hidden>
				<label class="radiobox-label" for="radioboxbutton-monthly"><div class="centered">Monthly</div></label>
			<input type="radio" class = "radiobox-button" name="radiobox" id="radioboxbutton-weekly" value="weekly-box" hidden>
				<label class="radiobox-label" for="radioboxbutton-weekly"><div class="centered">Weekly</div></label>
		</div>


		<div class="bottom-wrapper">
			<div class="radiobox hidden" id="yearly-box">Yearly Take Home Pay: £0.00</div>
			<div class="radiobox" id="monthly-box">Monthly Take Home Pay: £0.00</div>
			<div class="radiobox hidden" id="weekly-box">Weekly Take Home Pay: £0.00</div>
		</div>





		<script type="text/javascript">
		// Notes
		//  need to add input validation
		//
		// This function selects the right Student Loan Repayment Calculation Function and calculates the monthly repayment based on the Income and Loan Type variables
		function studentLoan(income, loanType) {
			if (loanType == "plan2") {
				return plan2StudentLoan(income);
			} else if (loanType == "plan1") {
				return plan1StudentLoan(income);
			} else {
				return 0;
			}
		}
		// This function calculates the output Take Home Pay
		//	It runs whenever the input box is edited, or when a radio button is selected
		function calculateTakeHomePay() {
			var income = document.getElementById('inputIncome').value
			// This takes the LoanType from the radio buttons in the form inputs
			var studentLoanType = document.querySelector('input[name="studentLoan"]:checked').value;
			//console.log("student loan type "+studentLoanType)
			//console.log("taxPayable:"+taxPayable(income))
			//console.log("studentLoan:"+studentLoan(income, studentLoanType))
			//console.log("totalNIConts:"+totalNIConts(income))
			//console.log("personalAllowanceCap"+personalAllowanceCap(income))
			after_Tax_Annual = (income - taxPayable(income) - studentLoan(income, studentLoanType) - totalNIConts(income));
			//this line divides the calculated annual Take Home Pay by 12 to get Monthly, rounds to 2dp, and puts the result into the page
			var yearlyOutput = (1/100)*Math.floor((after_Tax_Annual)*100);
			var monthlyOutput = yearlyOutput/12;
			var weeklyOutput = yearlyOutput/52;
			//toFixed() turns a number into a string with forced 2dp.
			document.getElementById("yearly-box").innerHTML = "Yearly Take Home Pay: £" + yearlyOutput.toFixed(2);
			document.getElementById("monthly-box").innerHTML = "Monthly Take Home Pay: £" + monthlyOutput.toFixed(2);
			document.getElementById("weekly-box").innerHTML = "Weekly Take Home Pay: £" + weeklyOutput.toFixed(2);
		}
		</script>
	</div>
</body>
</html>
