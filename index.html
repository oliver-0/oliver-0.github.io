<!DOCTYPE html>
<html>
<head>
	<title>Take-Home Pay Calculator</title>
	<link rel="stylesheet" href="styles.css">
	<script type="text/javascript" src="take_home_pay_calculator.js"></script>
	<script type="text/javascript" src="radiobox.js"></script>
</head>
<!--To do:
input validation
input 'sanitation'? xss?
add inputs:
	Scottish tax
	Pension / other salary sacrifice benefits? (drop down box for £/mo, £/yr, %)
		tax free benefits? not salary sacrifice but otherwise tax free (find examples of this)
	over SPA? (and other NI exemptions? check if there are any)
	blind personall allowance?
add preamble / wording
make footer scroll off the page
-->
<body>
	<header>
		<h1 class="mainHeaderText">Take-Home Pay Calculator</h1>
	</header>
	<article class="mainContent">
		<section class="inputs">
			<table>
				<tr>
					<td>Enter Salary:</td>
					<td><input id="inputIncome" name="inputIncome" type="number" autofocus></td>
				</tr>
				<tr>
					<td>Student Loan type:</td>
					<td>
						<select id="studentLoan" name="studentLoan">
							<option class="studentLoanOption" value="plan0">No Student Loan</option>
							<option class="studentLoanOption" value="plan1">Student Loan Plan 1</option>
							<option class="studentLoanOption" value="plan2">Student Loan Plan 2</option>
						</select>
					</td>
				</tr>
			</table>
		</section> <!--inputs section end-->
</br>
		<section class="radiobox">
			<div class="top-wrapper group">
				<input type="radio" class="radiobox-button hidden" name="radiobox" id="radioboxbutton-yearly" value="yearly-box">
					<label class="radiobox-label" for="radioboxbutton-yearly">Yearly</label>
				<input type="radio" class="radiobox-button hidden" name="radiobox" id="radioboxbutton-monthly" value="monthly-box" checked>
					<label class="radiobox-label" for="radioboxbutton-monthly">Monthly</label>
				<input type="radio" class="radiobox-button hidden" name="radiobox" id="radioboxbutton-weekly" value="weekly-box">
					<label class="radiobox-label" for="radioboxbutton-weekly">Weekly</label>
			</div>
			<div class="bottom-wrapper">
				<div class="radiobox-content hidden" id="yearly-box">Yearly Take Home Pay: £0.00</div>
				<div class="radiobox-content" id="monthly-box">Monthly Take Home Pay: £0.00</div>
				<div class="radiobox-content hidden" id="weekly-box">Weekly Take Home Pay: £0.00</div>
			</div>
		</section> <!--radiobox section end-->


	<div id="pieChart"></div>
	</article> <!--mainContent end-->

	<footer>
	  <p>Footer content</p>
	</footer>
	<script type="text/javascript">
		// Notes
		//  need to add input validation
		//
		// This function calculates the output Take Home Pay
		//	It runs whenever the input box is edited, or when a radio button is selected
		function calculateTakeHomePay() {
			var income = document.getElementById('inputIncome').value;
			// This takes the LoanType from the radio buttons in the form inputs
			var studentLoanType = document.querySelector('select[id="studentLoan"]').value;
			//console.log("student loan type "+studentLoanType)
			//console.log("taxPayable:"+taxPayable(income))
			//console.log("studentLoan:"+studentLoan(income, studentLoanType))
			//console.log("totalNIConts:"+totalNIConts(income))
			//console.log("personalAllowanceCap"+personalAllowanceCap(income))
			var after_Tax_Annual = (income - taxPayable(income) - studentLoan(income, studentLoanType) - totalNIConts(income));
			//this line divides the calculated annual Take Home Pay by 12 to get Monthly, rounds to 2dp, and puts the result into the page
			var yearlyOutput = (1/100)*Math.floor((after_Tax_Annual)*100);
			var monthlyOutput = yearlyOutput/12;
			var weeklyOutput = yearlyOutput/52;
			//toFixed() turns a number into a string with forced 2dp.
			document.getElementById("yearly-box").innerHTML = "Yearly Take Home Pay: £" + numberWithCommas(yearlyOutput.toFixed(2));
			document.getElementById("monthly-box").innerHTML = "Monthly Take Home Pay: £" + numberWithCommas(monthlyOutput.toFixed(2));
			document.getElementById("weekly-box").innerHTML = "Weekly Take Home Pay: £" + numberWithCommas(weeklyOutput.toFixed(2));
			drawChart();
		}
	</script>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript" src="chart.js"></script>
</body>
</html>
